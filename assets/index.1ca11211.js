import{_ as D,l as k,r as m,o as I,j as B,w as x,f as R}from"./index.6167e7c0.js";import{D as $}from"./index.63f04aef.js";function y(t,s){var s=s||{};for(let e in t)typeof t[e]=="object"?(s[e]=t[e].constructor===Array?[]:{},y(t[e],s[e])):s[e]=t[e];return s}const C={data(){return{SearchDB:[],searchResult:[]}},components:{Default:$},methods:{format(t){return t.replace(/[ ]/g," ").split(" ")},async getSearchDB(){let t=await k();t.status==200&&(this.SearchDB=t.data)},async searchKeyWords(t){let c=[];this.SearchDB.forEach(s=>{var n,a,u,p,d;let e=y(s),o=!1,h=this.format(t);for(let f=0;f<h.length;f++){const i=h[f];let l=new RegExp(i,"g"),_=((n=e==null?void 0:e.shortInfo)==null?void 0:n.title.search(l))||-1,r=((a=e==null?void 0:e.content)==null?void 0:a.search(l))||-1;if(_!=-1||r!=-1){if(o=!0,_!=-1&&(console.log(s.shortInfo.title),e.shortInfo.title=e.shortInfo.title.replace(l,`<span style="color:skyblue">${i}</span>`)),r!=-1){let g=r-100<0?0:r-100,S=r+100<((u=e==null?void 0:e.content)==null?void 0:u.length)?r+100:((p=e==null?void 0:e.content)==null?void 0:p.length)-1,w=((d=e==null?void 0:e.content)==null?void 0:d.substring(g,S))||"";e.shortInfo.shortCut=w.replace(l,`<span style="color:skyblue">${i}</span>`)}}else{o=!1;break}}o&&c.push(e.shortInfo)}),this.searchResult=c}},watch:{"$route.params.keywords":{immediate:!0,async handler(t){this.SearchDB.length==0&&await this.getSearchDB(),this.searchKeyWords(this.$route.params.keywords)}}},created(){}};function L(t,c,s,e,o,h){const n=m("ArticalShortInfoList"),a=m("Default");return I(),B(a,null,{default:x(()=>[R(n,{articlesShortInfoList:o.searchResult},null,8,["articlesShortInfoList"])]),_:1})}const E=D(C,[["render",L]]);export{E as default};
