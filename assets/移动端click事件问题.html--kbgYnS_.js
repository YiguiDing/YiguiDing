import{_ as s,c as i,o as a,b as n}from"./app-DDZPXrq3.js";const l={},h=n(`<h1 id="移动端click事件问题" tabindex="-1"><a class="header-anchor" href="#移动端click事件问题"><span>移动端click事件问题</span></a></h1><p>移动端click事件会有300ms的延迟，因为最初移动端需要用两只手指来放大页面，然后通过双击页面来恢复页面大小（double tap to zoom），300ms的延迟就是用来判断是否双击屏幕的，若两次点击屏幕的间隔小于300ms则判断是双击屏幕，大于300ms则被判断为click事件</p><h2 id="解决方案-禁用缩放" tabindex="-1"><a class="header-anchor" href="#解决方案-禁用缩放"><span>解决方案:禁用缩放</span></a></h2><p>禁用缩放后也就不存在双击屏幕恢复页面默认大小的功能，于是300ms的延迟就不存在了</p><div class="language-html line-numbers-mode" data-highlighter="shiki" data-ext="html" data-title="html" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#808080;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#569CD6;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#9CDCFE;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;viewport&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#9CDCFE;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;user-scalable=no&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#808080;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="解决方案-利用touch事件自己封装函数" tabindex="-1"><a class="header-anchor" href="#解决方案-利用touch事件自己封装函数"><span>解决方案:利用touch事件自己封装函数</span></a></h2><ul><li>手指触摸时记录触摸时间</li><li>手指离开时记录离开时间</li><li>手指移动时记录是否移动</li><li>当手指触摸和离开时间间隔小于150ms 且手指没有滑动屏幕，则判断为点击</li></ul><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> tap</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">isMove</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchStart</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchEnd</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;touchstart&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">        obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchStart</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> +</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//记录触摸时间</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;touchmove&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">        obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">isMove</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//记录是否移动</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;touchend&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">        obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchEnd</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> +</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//记录离开时间</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchEnd</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchStart</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 150</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">  &amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">isMove</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">            callback</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">        obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">isMove</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">        obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchStart</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">        obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchEnd</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//使用</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">tap</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(){</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    //do something</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="解决方案-使用fastclick-js插件" tabindex="-1"><a class="header-anchor" href="#解决方案-使用fastclick-js插件"><span>解决方案:使用fastclick.js插件</span></a></h2><p>github仓库：<a href="https://github.com/ftlabs/fastclick" target="_blank" rel="noopener noreferrer">fastclick.js</a></p><p>使用：****</p><div class="language-html line-numbers-mode" data-highlighter="shiki" data-ext="html" data-title="html" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#808080;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#569CD6;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#9CDCFE;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;application/javascript&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#9CDCFE;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;/path/to/fastclick.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#808080;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#569CD6;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#808080;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#569CD6;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // 原生js使用：</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;addEventListener&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> document</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">        document</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;DOMContentLoaded&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">attach</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">document</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">     }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    //jQuery使用：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">    $</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">        FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">attach</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">document</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#808080;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#569CD6;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#808080;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意</strong></p><p>Note: As of late 2015 most mobile browsers - notably Chrome and Safari - no longer have a 300ms touch delay, so fastclick offers no benefit on newer browsers, and risks introducing bugs into your application. Consider carefully whether you really need to use it.</p><p>截止到2015年，Chrome and Safari已经不再有300毫秒的触摸延迟了</p><p><strong>完整源代码</strong></p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;(</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> () {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;use strict&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@preserve</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> FastClick: polyfill to remove click delays on browsers with touch UIs.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@codingstandard</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> ftlabs-jsv2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@copyright</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> The Financial Times Limited [All Rights Reserved]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@license</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> MIT</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> License (see LICENSE.txt)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /*jslint browser:true, node:true*/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /*global define, Event, Node*/</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * Instantiate fast-clicking listeners on the specified layer.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@constructor</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {Element}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> layer</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> The layer to listen on</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {Object}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> [options</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">{}]</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> The options to override the defaults</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> oldOnClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  options</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * Whether a click is currently being tracked.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@type</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> boolean</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">trackingClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * Timestamp for when click tracking started.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@type</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">trackingClickStart</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * The element being tracked for a click.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@type</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> EventTarget</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * X-coordinate of touch start event.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@type</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchStartX</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * Y-coordinate of touch start event.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@type</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchStartY</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * ID of the last touch, retrieved from Touch.identifier.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@type</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lastTouchIdentifier</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * Touchmove boundary, beyond which a click will be cancelled.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@type</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchBoundary</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> options</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchBoundary</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * The FastClick layer.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@type</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> Element</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">layer</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * The minimum time between tap(touchstart and touchend) events</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@type</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">tapDelay</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> options</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">tapDelay</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 200</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * The maximum time for a tap</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@type</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">tapTimeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> options</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">tapTimeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 700</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">notNeeded</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Some old versions of Android don&#39;t have Function.prototype.bind</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">() { </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> method</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">); };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> methods</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;onMouse&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;onClick&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;onTouchStart&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;onTouchMove&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;onTouchEnd&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;onTouchCancel&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> context</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> i</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> methods</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">; </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> l</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">; </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   context</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">methods</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">i</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">]] </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">methods</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">i</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">]], </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Set up event handlers as required</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">deviceIsAndroid</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;mouseover&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onMouse</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;mousedown&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onMouse</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;mouseup&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onMouse</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;touchstart&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onTouchStart</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;touchmove&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onTouchMove</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;touchend&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onTouchEnd</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;touchcancel&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onTouchCancel</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Hack is required for browsers that don&#39;t support Event#stopImmediatePropagation (e.g. Android 2)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // which is how FastClick normally stops click events bubbling to callbacks registered on the FastClick</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // layer when they are cancelled.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">Event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">stopImmediatePropagation</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">removeEventListener</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">capture</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> rmv</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> Node</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">     rmv</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">hijacked</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">capture</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">     rmv</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">capture</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">addEventListener</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">capture</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> adv</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> Node</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">     adv</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">hijacked</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">hijacked</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">propagationStopped</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">       callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">     }), </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">capture</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">     adv</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">capture</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // If a handler is already declared in the element&#39;s onclick attribute, it will be fired before</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // FastClick&#39;s onClick handler. Fix this by pulling out the user-defined handler function and</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // adding it as listener.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onclick</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;function&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   // Android browser on at least 3.2 requires a new reference to the function in layer.onclick</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   // - the old one won&#39;t work if passed to addEventListener directly.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   oldOnClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onclick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">    oldOnClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onclick</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * Windows Phone 8.1 fakes user agent string to look like Android and iPhone.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@type</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> boolean</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> deviceIsWindowsPhone</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> navigator</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">userAgent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;Windows Phone&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * Android requires exceptions.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@type</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> boolean</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> deviceIsAndroid</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> navigator</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">userAgent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;Android&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">deviceIsWindowsPhone</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * iOS requires exceptions.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@type</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> boolean</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> deviceIsIOS</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;"> /iP</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">ad</span><span style="--shiki-light:#D73A49;--shiki-dark:#DCDCAA;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">hone</span><span style="--shiki-light:#D73A49;--shiki-dark:#DCDCAA;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">od</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">navigator</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">userAgent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">&amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">deviceIsWindowsPhone</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * iOS 4 requires an exception for select elements.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@type</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> boolean</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> deviceIsIOS4</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> deviceIsIOS</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">/OS 4_</span><span style="--shiki-light:#005CC5;--shiki-dark:#D16969;">\\d</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">_</span><span style="--shiki-light:#005CC5;--shiki-dark:#D16969;">\\d</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#D7BA7D;">?</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">navigator</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">userAgent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * iOS 6.0-7.* requires the target element to be manually derived</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@type</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> boolean</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> deviceIsIOSWithBadTarget</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> deviceIsIOS</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">/OS </span><span style="--shiki-light:#005CC5;--shiki-dark:#CE9178;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#D16969;">6-7</span><span style="--shiki-light:#005CC5;--shiki-dark:#CE9178;">]</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">_</span><span style="--shiki-light:#005CC5;--shiki-dark:#D16969;">\\d</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">navigator</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">userAgent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * BlackBerry requires exceptions.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@type</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> boolean</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> deviceIsBlackBerry10</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> navigator</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">userAgent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;BB10&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * Determine whether a given element requires a native click.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {EventTarget|Element}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> target</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> Target DOM element</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {boolean}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> Returns true if the element needs a native click</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">needsClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  switch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">nodeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">toLowerCase</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">()) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Don&#39;t send a synthetic click to disabled inputs (issue #62)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  case</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  case</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;select&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  case</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;textarea&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">disabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   break</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  case</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;input&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   // File inputs need real clicks on iOS 6 due to a browser bug (issue #68)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> ((</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">deviceIsIOS</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;file&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">disabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   break</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  case</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;label&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  case</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;iframe&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// iOS8 homescreen apps can prevent events bubbling into frames</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  case</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;video&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#DCDCAA;">\\b</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">needsclick</span><span style="--shiki-light:#D73A49;--shiki-dark:#DCDCAA;">\\b</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">className</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * Determine whether a given element requires a call to focus to simulate click into element.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {EventTarget|Element}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> target</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> Target DOM element</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {boolean}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> Returns true if the element requires a call to focus to simulate native click.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">needsFocus</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  switch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">nodeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">toLowerCase</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  case</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;textarea&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  case</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;select&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">deviceIsAndroid</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  case</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;input&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   switch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   case</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   case</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;checkbox&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   case</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;file&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   case</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;image&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   case</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;radio&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   case</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;submit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   // No point in attempting to focus disabled inputs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">disabled</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">readOnly</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  default</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#DCDCAA;">\\b</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">needsfocus</span><span style="--shiki-light:#D73A49;--shiki-dark:#DCDCAA;">\\b</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">className</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * Send a click event to the specified element.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {EventTarget|Element}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {Event}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> event</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">sendClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> clickEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect (#24)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">document</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">activeElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> document</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">activeElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !==</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   document</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">activeElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">blur</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  touch</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">changedTouches</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Synthesise a click event, with an extra attribute so it can be tracked</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  clickEvent</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> document</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">createEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;MouseEvents&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  clickEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">initMouseEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">determineEventType</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">window</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">screenX</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">screenY</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">clientX</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">clientY</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  clickEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">forwardedTouchEvent</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">dispatchEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">clickEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">determineEventType</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  //Issue #159: Android Chrome Select Box does not open with a synthetic click event</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">deviceIsAndroid</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">tagName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">toLowerCase</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;select&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;mousedown&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {EventTarget|Element}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">focus</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> length</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Issue #160: on iOS 7, some input elements (e.g. date datetime month) throw a vague TypeError on setSelectionRange. These elements don&#39;t have an integer value for the selectionStart and selectionEnd properties, but unfortunately that can&#39;t be used for detection because accessing the properties also throws a TypeError. Just check the type instead. Filed as Apple bug #15122724.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">deviceIsIOS</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">setSelectionRange</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;date&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!==</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !==</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;time&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !==</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;month&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !==</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;email&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   length</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">setSelectionRange</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">focus</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * Check whether the given target element is a child of a scrollable layer and if so, set a flag on it.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {EventTarget|Element}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">updateScrollParent</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> scrollParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">parentElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  scrollParent</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">fastClickScrollParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Attempt to discover whether the target element is contained within a scrollable layer. Re-check if the</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // target element was moved to another parent.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">scrollParent</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">scrollParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">contains</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   parentElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   do</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">parentElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">scrollHeight</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> parentElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">offsetHeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">     scrollParent</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> parentElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">     targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">fastClickScrollParent</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> parentElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">     break</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    parentElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> parentElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">parentElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">while</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">parentElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Always update the scroll top tracker if possible.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">scrollParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   scrollParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">fastClickLastScrollTop</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> scrollParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">scrollTop</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {EventTarget}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {Element|EventTarget}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">getTargetElementFromEventTarget</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">eventTarget</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // On some older browsers (notably Safari on iOS 4.1 - see issue #56) the event target may be a text node.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">eventTarget</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">nodeType</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ===</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> Node</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">TEXT_NODE</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> eventTarget</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">parentNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> eventTarget</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * On touch start, record the position and scroll offset.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {Event}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> event</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {boolean}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onTouchStart</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">selection</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Ignore multiple touches, otherwise pinch-to-zoom is prevented if both fingers are on the FastClick element (issue #111).</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetTouches</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  targetElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">getTargetElementFromEventTarget</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  touch</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetTouches</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">deviceIsIOS</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   // Only trusted events will deselect text on iOS (issue #49)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   selection</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> window</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">getSelection</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">selection</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">rangeCount</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">selection</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">isCollapsed</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">deviceIsIOS4</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // Weird things happen on iOS when an alert or confirm dialog is opened from a click event callback (issue #23):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // when the user next taps anywhere else on the page, new touchstart and touchend events are dispatched</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // with the same identifier as the touch event that previously triggered the click that triggered the alert.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // Sadly, there is an issue on iOS 4 that causes some normal touch events to have the same identifier as an</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // immediately preceeding touch event (issue #52), so this fix is unavailable on that platform.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // Issue 120: touch.identifier is 0 when Chrome dev tools &#39;Emulate touch events&#39; is set with an iOS device UA string,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // which causes all touch events to be ignored. As this block only applies to iOS, and iOS identifiers are always long,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // random integers, it&#39;s safe to to continue if the identifier is 0 here.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">identifier</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> touch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">identifier</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ===</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lastTouchIdentifier</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">     event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">preventDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">     return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lastTouchIdentifier</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> touch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">identifier</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // If the target element is a child of a scrollable layer (using -webkit-overflow-scrolling: touch) and:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // 1) the user does a fling scroll on the scrollable layer</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // 2) the user stops the fling scroll with another tap</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // then the event.target of the last &#39;touchend&#39; event will be the element that was under the user&#39;s finger</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // when the fling scroll was started, causing FastClick to send a click event to that layer - unless a check</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // is made to ensure that a parent layer was not scrolled before sending a synthetic click (issue #42).</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">updateScrollParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">trackingClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">trackingClickStart</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">timeStamp</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchStartX</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> touch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">pageX</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchStartY</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> touch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">pageY</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Prevent phantom clicks on fast double-tap (issue #36)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> ((</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">timeStamp</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lastClickTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">tapDelay</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">preventDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * Based on a touchmove event object, check whether the touch has moved past a boundary since it started.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {Event}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> event</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {boolean}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">touchHasMoved</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> touch</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">changedTouches</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">], </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">boundary</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchBoundary</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">Math</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">abs</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">pageX</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchStartX</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> boundary</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> Math</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">abs</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">pageY</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchStartY</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> boundary</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * Update the last position.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {Event}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> event</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {boolean}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onTouchMove</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">trackingClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // If the touch has moved, cancel the click tracking</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !==</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">getTargetElementFromEventTarget</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">touchHasMoved</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">   this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">trackingClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">   this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * Attempt to find the labelled control for the given label element.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {EventTarget|HTMLLabelElement}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> labelElement</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {Element|null}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">findControl</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">labelElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Fast path for newer browsers supporting the HTML5 control attribute</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">labelElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">control</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !==</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> labelElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">control</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // All browsers under test that support touch events also support the HTML5 htmlFor attribute</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">labelElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">htmlFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> document</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">labelElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">htmlFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // If no for attribute exists, attempt to retrieve the first labellable descendant element</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // the list of which is defined here: http://www.w3.org/TR/html5/forms.html#category-label</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> labelElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * On touch end, determine whether to send a click event at once.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {Event}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> event</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {boolean}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onTouchEnd</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> forElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">trackingClickStart</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetTagName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">scrollParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">trackingClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Prevent phantom clicks on fast double-tap (issue #36)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> ((</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">timeStamp</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lastClickTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">tapDelay</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">   this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">cancelNextClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> ((</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">timeStamp</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">trackingClickStart</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">tapTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Reset to prevent wrong click cancel on input (issue #156).</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">cancelNextClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lastClickTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">timeStamp</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  trackingClickStart</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">trackingClickStart</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">trackingClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">trackingClickStart</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // On some iOS devices, the targetElement supplied with the event is invalid if the layer</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // is performing a transition or scroll, and has to be re-detected manually. Note that</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // for this to function correctly, it must be called *after* the event target is checked!</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // See issue #57; also filed as rdar://13048589 .</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">deviceIsIOSWithBadTarget</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   touch</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">changedTouches</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   // In certain cases arguments of elementFromPoint can be negative, so prevent setting targetElement to null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   targetElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> document</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">elementFromPoint</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">pageX</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> window</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">pageXOffset</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touch</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">pageY</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> window</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">pageYOffset</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">fastClickScrollParent</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">fastClickScrollParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  targetTagName</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">tagName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">toLowerCase</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetTagName</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;label&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   forElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">findControl</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">forElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">focus</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">deviceIsAndroid</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">     return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    targetElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> forElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">needsFocus</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   // Case 1: If the touch started a while ago (best guess is 100ms based on tests for issue #36) then focus will be triggered anyway. Return early and unset the target element reference so that the subsequent click will be allowed through.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   // Case 2: Without this exception for input elements tapped when the document is contained in an iframe, then any inputted text won&#39;t be visible even though the value attribute is updated as the user types (issue #37).</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> ((</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">timeStamp</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> trackingClickStart</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 100</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">deviceIsIOS</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> window</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">top</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !==</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> window</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetTagName</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;input&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">   this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">focus</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">   this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">sendClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   // Select elements need the event to go through on iOS 4, otherwise the selector menu won&#39;t open.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   // Also this breaks opening selects when VoiceOver is active on iOS6, iOS7 (and possibly others)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">deviceIsIOS</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetTagName</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !==</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;select&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">preventDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">deviceIsIOS</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">deviceIsIOS4</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   // Don&#39;t send a synthetic click event if the target element is contained within a parent layer that was scrolled</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   // and this tap is being used to stop the scrolling (usually initiated by a fling - issue #42).</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   scrollParent</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">fastClickScrollParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">scrollParent</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> scrollParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">fastClickLastScrollTop</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !==</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> scrollParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">scrollTop</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Prevent the actual click from going though - unless the target node is marked as requiring</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // real clicks or if it is in the allowlist in which case only non-programmatic clicks are permitted.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">needsClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">preventDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">   this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">sendClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * On touch cancel, stop tracking the click.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {void}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onTouchCancel</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">trackingClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * Determine mouse events which should be permitted.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {Event}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> event</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {boolean}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onMouse</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // If a target element was never set (because a touch event was never fired) allow the event</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">forwardedTouchEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Programmatically generated events targeting a specific element should be permitted</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">cancelable</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Derive and check the target element to see whether the mouse event needs to be permitted;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // unless explicitly enabled, prevent non-touch click events from triggering actions,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // to prevent ghost/doubleclicks.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">needsClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">cancelNextClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   // Prevent any user-added listeners declared on FastClick element from being fired.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">stopImmediatePropagation</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">stopImmediatePropagation</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // Part of the hack for browsers that don&#39;t support Event#stopImmediatePropagation (e.g. Android 2)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">propagationStopped</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   // Cancel the event</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">stopPropagation</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">preventDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // If the mouse event is permitted, return true for the action to go through.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * On actual clicks, determine whether this is a touch-generated click, a click action occurring</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * naturally after a delay after a touch (which needs to be cancelled to avoid duplication), or</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * an actual click which should be permitted.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {Event}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> event</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {boolean}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> permitted</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // It&#39;s possible for another FastClick-like library delivered with third-party code to fire a click event before FastClick does (issue #44). In that case, set the click-tracking flag back to false and return early. This will cause onTouchEnd to return early.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">trackingClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">   this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">   this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">trackingClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Very odd behaviour on iOS (issue #18): if a submit element is present inside a form and the user hits enter in the iOS simulator or clicks the Go button on the pop-up OS keyboard the a kind of &#39;fake&#39; click event will be triggered with the submit-type input element as the target.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;submit&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">detail</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ===</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  permitted</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onMouse</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Only unset targetElement if the click is not permitted. This will ensure that the check for !targetElement in onMouse fails and the browser&#39;s click doesn&#39;t go through.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">permitted</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">   this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // If clicks are permitted, return true for the action to go through.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> permitted</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * Remove all FastClick&#39;s event listeners.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {void}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">destroy</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> layer</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">deviceIsAndroid</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;mouseover&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onMouse</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;mousedown&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onMouse</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;mouseup&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onMouse</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;touchstart&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onTouchStart</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;touchmove&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onTouchMove</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;touchend&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onTouchEnd</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;touchcancel&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">onTouchCancel</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * Check whether FastClick is needed.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {Element}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> layer</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> The layer to listen on</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">notNeeded</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> metaViewport</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> chromeVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> blackberryVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> firefoxVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Devices that don&#39;t support touch don&#39;t need FastClick</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> window</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">ontouchstart</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;undefined&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Chrome version - zero for other browsers</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  chromeVersion</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">/Chrome</span><span style="--shiki-light:#22863A;--shiki-dark:#D7BA7D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:inherit;">\\/</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#CE9178;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#D16969;">0-9</span><span style="--shiki-light:#005CC5;--shiki-dark:#CE9178;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#D7BA7D;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">navigator</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">userAgent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> [,</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">])[</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">chromeVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">deviceIsAndroid</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    metaViewport</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> document</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;meta[name=viewport]&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">metaViewport</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">     // Chrome on Android with user-scalable=&quot;no&quot; doesn&#39;t need FastClick (issue #89)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">     if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">metaViewport</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">content</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;user-scalable=no&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!==</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">      return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">     }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">     // Chrome 32 and above with width=device-width or less don&#39;t need FastClick</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">     if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">chromeVersion</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 31</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> document</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">documentElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">scrollWidth</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> window</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">outerWidth</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">      return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">     }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   // Chrome desktop doesn&#39;t need FastClick (issue #15)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">deviceIsBlackBerry10</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   blackberryVersion</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> navigator</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">userAgent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">/Version</span><span style="--shiki-light:#22863A;--shiki-dark:#D7BA7D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:inherit;">\\/</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#CE9178;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#D16969;">0-9</span><span style="--shiki-light:#005CC5;--shiki-dark:#CE9178;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#D7BA7D;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">)</span><span style="--shiki-light:#22863A;--shiki-dark:#D7BA7D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:inherit;">\\.</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#CE9178;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#D16969;">0-9</span><span style="--shiki-light:#005CC5;--shiki-dark:#CE9178;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#D7BA7D;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   // BlackBerry 10.3+ does not require Fastclick library.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   // https://github.com/ftlabs/fastclick/issues/251</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">blackberryVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 10</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> blackberryVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    metaViewport</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> document</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;meta[name=viewport]&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">metaViewport</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">     // user-scalable=no eliminates click delay.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">     if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">metaViewport</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">content</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;user-scalable=no&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!==</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">      return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">     }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">     // width=device-width (or less than device-width) eliminates click delay.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">     if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">document</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">documentElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">scrollWidth</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> window</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">outerWidth</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">      return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">     }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // IE10 with -ms-touch-action: none or manipulation, which disables double-tap-to-zoom (issue #97)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">msTouchAction</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;none&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchAction</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;manipulation&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // Firefox version - zero for other browsers</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  firefoxVersion</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">/Firefox</span><span style="--shiki-light:#22863A;--shiki-dark:#D7BA7D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:inherit;">\\/</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#CE9178;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#D16969;">0-9</span><span style="--shiki-light:#005CC5;--shiki-dark:#CE9178;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#D7BA7D;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#D16969;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">navigator</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">userAgent</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> [,</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">])[</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">firefoxVersion</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 27</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">   // Firefox 27+ does not have tap delay if the content is not zoomable - https://bugzilla.mozilla.org/show_bug.cgi?id=922896</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">   metaViewport</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> document</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;meta[name=viewport]&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">metaViewport</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">metaViewport</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">content</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&#39;user-scalable=no&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!==</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> document</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">documentElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">scrollWidth</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> window</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">outerWidth</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // IE11: prefixed -ms-touch-action is no longer supported and it&#39;s recomended to use non-prefixed version</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // http://msdn.microsoft.com/en-us/library/windows/apps/Hh767313.aspx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchAction</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;none&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">touchAction</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;manipulation&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * Factory method for creating a FastClick object</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {Element}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> layer</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> The layer to listen on</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {Object}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> [options</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">{}]</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> The options to override the defaults</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">attach</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> define</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;function&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> define</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">amd</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;object&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> define</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">amd</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // AMD. Register as an anonymous module.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  define</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">   return</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">typeof</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> module</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !==</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;undefined&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> module</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">  module</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">attach</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">  module</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">FastClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  window</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">FastClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> FastClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}());</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,17),k=[h];function t(e,p){return a(),i("div",null,k)}const d=s(l,[["render",t],["__file","移动端click事件问题.html.vue"]]),r=JSON.parse('{"path":"/%E5%89%8D%E7%AB%AF/zip%E5%BD%92%E6%A1%A3/%E7%A7%BB%E5%8A%A8%E7%AB%AFclick%E4%BA%8B%E4%BB%B6%E9%97%AE%E9%A2%98/%E7%A7%BB%E5%8A%A8%E7%AB%AFclick%E4%BA%8B%E4%BB%B6%E9%97%AE%E9%A2%98.html","title":"移动端click事件问题","lang":"zh-CN","frontmatter":{"title":"移动端click事件问题","date":"2022-07-06T19:50:00.000Z","cover":"./cover/default_cover.jpg","tag":["移动端","click事件"],"category":"笔记","description":"移动端click事件问题 移动端click事件会有300ms的延迟，因为最初移动端需要用两只手指来放大页面，然后通过双击页面来恢复页面大小（double tap to zoom），300ms的延迟就是用来判断是否双击屏幕的，若两次点击屏幕的间隔小于300ms则判断是双击屏幕，大于300ms则被判断为click事件 解决方案:禁用缩放 禁用缩放后也就不存...","head":[["meta",{"property":"og:url","content":"https://dingdingdang.online/%E5%89%8D%E7%AB%AF/zip%E5%BD%92%E6%A1%A3/%E7%A7%BB%E5%8A%A8%E7%AB%AFclick%E4%BA%8B%E4%BB%B6%E9%97%AE%E9%A2%98/%E7%A7%BB%E5%8A%A8%E7%AB%AFclick%E4%BA%8B%E4%BB%B6%E9%97%AE%E9%A2%98.html"}],["meta",{"property":"og:site_name","content":"YiguiDing的Blog小站"}],["meta",{"property":"og:title","content":"移动端click事件问题"}],["meta",{"property":"og:description","content":"移动端click事件问题 移动端click事件会有300ms的延迟，因为最初移动端需要用两只手指来放大页面，然后通过双击页面来恢复页面大小（double tap to zoom），300ms的延迟就是用来判断是否双击屏幕的，若两次点击屏幕的间隔小于300ms则判断是双击屏幕，大于300ms则被判断为click事件 解决方案:禁用缩放 禁用缩放后也就不存..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-18T08:31:16.000Z"}],["meta",{"property":"article:author","content":"丁毅桂"}],["meta",{"property":"article:tag","content":"移动端"}],["meta",{"property":"article:tag","content":"click事件"}],["meta",{"property":"article:published_time","content":"2022-07-06T19:50:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-18T08:31:16.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"移动端click事件问题\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-07-06T19:50:00.000Z\\",\\"dateModified\\":\\"2024-03-18T08:31:16.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"丁毅桂\\",\\"email\\":\\"2449695354@qq.com\\"}]}"],["meta",{"name":"baidu-site-verification","content":"codeva-PwE9Ts6nMl"}]]},"headers":[{"level":2,"title":"解决方案:禁用缩放","slug":"解决方案-禁用缩放","link":"#解决方案-禁用缩放","children":[]},{"level":2,"title":"解决方案:利用touch事件自己封装函数","slug":"解决方案-利用touch事件自己封装函数","link":"#解决方案-利用touch事件自己封装函数","children":[]},{"level":2,"title":"解决方案:使用fastclick.js插件","slug":"解决方案-使用fastclick-js插件","link":"#解决方案-使用fastclick-js插件","children":[]}],"git":{"createdTime":1700226391000,"updatedTime":1710750676000,"contributors":[{"name":"YiguiDing","email":"2449695354@qq.com","commits":1}]},"readingTime":{"minutes":11.27,"words":3382},"filePathRelative":"前端/zip归档/移动端click事件问题/移动端click事件问题.md","localizedDate":"2022年7月6日","excerpt":"","autoDesc":true}');export{d as comp,r as data};
