import{_ as s,c as i,o as a,b as n}from"./app-Cdh6IwlF.js";const h="/assets/%E4%BD%A0%E7%94%BB%E6%88%91%E7%8C%9C%E7%AE%80%E6%98%93%E7%89%88%E5%AE%9E%E7%8E%B0-DWuePpN8.png",k="/assets/2023-01-30-03-04-12-CtxlTk75.png",l="/assets/2023-01-30-03-05-34-Dy52Mo0p.png",t="/assets/2023-01-30-03-06-02-DLiwAjJi.png",p="/assets/%E4%BD%A0%E7%94%BB%E6%88%91%E7%8C%9C%E7%AE%80%E6%98%93%E7%89%88%E5%AE%9E%E7%8E%B0-DWuePpN8.png",e="/assets/2023-01-30-03-08-07-D0B4ZzId.png",E="/assets/2023-01-30-03-08-17-B-kjRY5A.png",r={},d=n('<h1 id="你画我猜简易版实现" tabindex="-1"><a class="header-anchor" href="#你画我猜简易版实现"><span>你画我猜简易版实现</span></a></h1><p><img src="'+h+'" alt=""></p><h2 id="目录" tabindex="-1"><a class="header-anchor" href="#目录"><span>目录</span></a></h2><ul><li><a href="#%E4%BD%A0%E7%94%BB%E6%88%91%E7%8C%9C%E7%AE%80%E6%98%93%E7%89%88%E5%AE%9E%E7%8E%B0">你画我猜简易版实现</a><ul><li><a href="#%E7%9B%AE%E5%BD%95">目录</a></li><li><a href="#%E5%AE%9E%E7%8E%B0%E6%95%88%E6%9E%9C%E8%AE%B0%E5%BD%95">实现效果记录</a></li><li><a href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%8F%AF%E5%A4%8D%E7%94%A8%E4%BB%A3%E7%A0%81">服务端可复用代码</a></li><li><a href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%83%A8%E5%88%86%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0">客户端部分代码实现</a></li><li><a href="#%E7%94%BB%E6%9D%BF%E7%9A%84%E5%AE%9E%E7%8E%B0">画板的实现</a></li></ul></li></ul><h2 id="实现效果记录" tabindex="-1"><a class="header-anchor" href="#实现效果记录"><span>实现效果记录</span></a></h2><p><img src="'+k+'" alt=""></p><p><img src="'+l+'" alt=""></p><p><img src="'+t+'" alt=""></p><p><img src="'+p+'" alt=""></p><p><img src="'+e+'" alt=""></p><p><img src="'+E+`" alt=""></p><h2 id="服务端可复用代码" tabindex="-1"><a class="header-anchor" href="#服务端可复用代码"><span>服务端可复用代码</span></a></h2><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> path</span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> createExpress</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, { </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> _static</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &quot;express&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> { </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">Server</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &quot;socket.io&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> { </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">GameServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &quot;./GameServer.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;"> express</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> createExpress</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;"> httpServer</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">express</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;"> socketServer</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> Server</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">httpServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;"> gameServer</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> GameServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">socketServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//游戏服务器,接收一个socket服务器</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">express</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">_static</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">__dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;../dist/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">))); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 静态页面</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">gameServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 游戏服务器</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">httpServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;listening on *:3000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="客户端部分代码实现" tabindex="-1"><a class="header-anchor" href="#客户端部分代码实现"><span>客户端部分代码实现</span></a></h2><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> { </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">Whiteboard</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &quot;@/Whiteboard&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> { </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &quot;socket.io-client&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> GameClient</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Observable</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  connect</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  username</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  usernames</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> [];</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  isRunning</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> boolean</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  lines</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> [];</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  line_buffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  master</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  isMaster</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  whiteboard</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Whiteboard</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> Whiteboard</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">private</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;"> socket</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">socket</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> update</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">usernames</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">reqGetUserList</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">isRunning</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">reqGetGameState</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lines</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">reqGetLines</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">master</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">reqGetMaster</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">username</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ==</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">master</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">isMaster</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    else</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">isMaster</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">whiteboard</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">afterUpdate</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">isRunning</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">isMaster</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lines</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">whiteboard</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lines</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">line_buffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">whiteboard</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lineBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">updateLines</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">([</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">...</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lines</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">line_buffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">whiteboard</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lines</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lines</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> becomeMaster</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">reqBecomeMaster</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> startGame</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">answer</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">reqStartGame</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">answer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> updateLines</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">lines</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[]) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">reqUpdateLines</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lines</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> guessAnswer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">answer</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">reqGuessAnswer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">answer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  public</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> login</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">username</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">await</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">reqLogin</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">username</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">username</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> username</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">Notify</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">      return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  public</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> logout</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">await</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">reqLogout</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">()) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">username</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">Notify</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">      return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  public</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> isLogin</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">await</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">reqIsLogin</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">      return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // 更新数据</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  private</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> reqGetUserList</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">typeof</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">usernames</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;getUserList&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&gt;) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  private</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> reqGetGameState</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;getGameState&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  private</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> reqGetLines</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;">Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&gt;&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;getLines&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&gt;) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  private</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> reqGetMaster</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;getMaster&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  private</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> reqBecomeMaster</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;becomeMaster&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  private</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> reqStartGame</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">answer</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;startGame&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">answer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  private</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> reqUpdateLines</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">lines</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[]) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;updateLines&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lines</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  private</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> reqGuessAnswer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">answer</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;guessAnswer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">answer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  private</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> reqLogin</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">username</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;login&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">username</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  private</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> reqLogout</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;logout&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  private</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> reqIsLogin</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;isLogin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  isConnect</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">connect</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  setConnect</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">newVal</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">connect</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> newVal</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">Notify</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  run</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;connect&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;game:connect&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">setConnect</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;disconnect&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">setConnect</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;update&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  observers</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> [];</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  Attach</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">observer</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">observers</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">observers</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  Detach</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">observer</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">observers</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">observers</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">splice</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">observers</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  Notify</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">observers</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> item</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 设计模式观察者模式</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 观察者</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  update</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 可观察对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Observable</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  observers</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;">Observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&gt;; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 观察者</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  Attach</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">observer</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 附加观察者</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  Detach</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">observer</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 分离观察者</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  Notify</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 通知观察者</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="画板的实现" tabindex="-1"><a class="header-anchor" href="#画板的实现"><span>画板的实现</span></a></h2><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> LineInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  strokeStyle</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  lineWidth</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  points</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;">number</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">};</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> Whiteboard</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  fillStyle</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &quot;black&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  pencilSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> HTMLCanvasElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> CanvasRenderingContext2D</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  CANVAS_W</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  CANVAS_H</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 760</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  lines</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> LineInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> [];</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  lineBuffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> LineInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    strokeStyle:</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    lineWidth:</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    points:</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> [],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  };</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  afterUpdate</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {};</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  mouseInput</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> InputListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">canvasId</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">canvasId</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">canvasId</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  init</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">canvasId</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> document</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">canvasId</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> HTMLCanvasElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">getContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;2d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> CanvasRenderingContext2D</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">width</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">CANVAS_W</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">height</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">CANVAS_H</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">mouseInput</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> InputListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">canvasId</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  update</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">mouseInput</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">inputs</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> !=</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lines</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">mouseInput</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">inputs</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">shift</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lineBuffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">({}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">mouseInput</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">input_buffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">afterUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  drawLines</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">graphs</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> LineInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[]) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    graphs</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">graph</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">graph</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">points</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">beginPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">moveTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">graph</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">points</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">], </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">graph</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">points</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">]);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">      for</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> index</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">; </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">index</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> graph</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">points</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">; ) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;"> pointX</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> graph</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">points</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">index</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;"> pointY</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> graph</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">points</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">index</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">];</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">lineTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">pointX</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">pointY</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lineWidth</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> graph</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lineWidth</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">strokeStyle</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> graph</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">strokeStyle</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">stroke</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  draw</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">interval</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">clearRect</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">CANVAS_W</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">CANVAS_H</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">drawLines</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lines</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">drawLines</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">([</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">lineBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  refresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">interval</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">draw</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">interval</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  start</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> last</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">    let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> animate</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">current</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">refresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">current</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> last</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      last</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> current</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">      requestAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">animate</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    };</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">    animate</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> InputListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  inputs</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> LineInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> [];</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  input_buffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> LineInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    strokeStyle:</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &quot;black&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    lineWidth:</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    points:</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> [],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  };</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  target</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> HTMLElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">targetId</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> document</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">targetId</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> HTMLElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">listening_pc</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // this.listening_mobile()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">  listening_pc</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> mousedown</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;mousedown&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      mousedown</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;mousemove&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">mousedown</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">input_buffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">points</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">offsetX</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">input_buffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">points</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">offsetY</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;mouseup&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      mousedown</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">inputs</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">({}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">input_buffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">input_buffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">points</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> [];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // listening_mobile() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  //  let touched = false;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  //  this.target.addEventListener(&quot;touchstart&quot;, () =&gt; {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  //   touched = true;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  //  })</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  //  this.target.addEventListener(&quot;touchmove&quot;, (e) =&gt; {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  //   if (!touched) return</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  //   this.inputs.push({ x: e.targetTouches[0].clientX, y: e.targetTouches[0].clientY })</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  //  })</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  //  this.target.addEventListener(&quot;touchend&quot;, () =&gt; {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  //   touched = false;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  //  })</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,17),C=[d];function g(y,D){return a(),i("div",null,C)}const v=s(r,[["render",g],["__file","index.html.vue"]]),A=JSON.parse('{"path":"/%E9%A1%B9%E7%9B%AE/zip%E5%BD%92%E6%A1%A3/%E4%B8%8D%E5%80%BC%E4%B8%80%E6%8F%90%E7%9A%84%E5%B0%8F%E6%B8%B8%E6%88%8F/%E4%BD%A0%E7%94%BB%E6%88%91%E7%8C%9C%E5%B0%8F%E6%B8%B8%E6%88%8F%E7%AE%80%E6%98%93%E7%89%88%E5%AE%9E%E7%8E%B0/","title":"你画我猜简易版实现","lang":"zh-CN","frontmatter":{"title":"你画我猜简易版实现","date":"2023-01-26T18:28:00.000Z","cover":"./cover/你画我猜简易版实现.png","tag":["笔记","帧同步","socket","socket.io","demo","game","你画我猜"],"category":"笔记","description":"你画我猜简易版实现 目录 你画我猜简易版实现 目录 实现效果记录 服务端可复用代码 客户端部分代码实现 画板的实现 实现效果记录 服务端可复用代码 客户端部分代码实现 画板的实现","head":[["meta",{"property":"og:url","content":"https://dingdingdang.online/%E9%A1%B9%E7%9B%AE/zip%E5%BD%92%E6%A1%A3/%E4%B8%8D%E5%80%BC%E4%B8%80%E6%8F%90%E7%9A%84%E5%B0%8F%E6%B8%B8%E6%88%8F/%E4%BD%A0%E7%94%BB%E6%88%91%E7%8C%9C%E5%B0%8F%E6%B8%B8%E6%88%8F%E7%AE%80%E6%98%93%E7%89%88%E5%AE%9E%E7%8E%B0/"}],["meta",{"property":"og:site_name","content":"YiguiDing的Blog小站"}],["meta",{"property":"og:title","content":"你画我猜简易版实现"}],["meta",{"property":"og:description","content":"你画我猜简易版实现 目录 你画我猜简易版实现 目录 实现效果记录 服务端可复用代码 客户端部分代码实现 画板的实现 实现效果记录 服务端可复用代码 客户端部分代码实现 画板的实现"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-18T08:31:16.000Z"}],["meta",{"property":"article:author","content":"丁毅桂"}],["meta",{"property":"article:tag","content":"笔记"}],["meta",{"property":"article:tag","content":"帧同步"}],["meta",{"property":"article:tag","content":"socket"}],["meta",{"property":"article:tag","content":"socket.io"}],["meta",{"property":"article:tag","content":"demo"}],["meta",{"property":"article:tag","content":"game"}],["meta",{"property":"article:tag","content":"你画我猜"}],["meta",{"property":"article:published_time","content":"2023-01-26T18:28:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-18T08:31:16.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"你画我猜简易版实现\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-01-26T18:28:00.000Z\\",\\"dateModified\\":\\"2024-03-18T08:31:16.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"丁毅桂\\",\\"email\\":\\"2449695354@qq.com\\"}]}"],["meta",{"name":"baidu-site-verification","content":"codeva-PwE9Ts6nMl"}]]},"headers":[{"level":2,"title":"目录","slug":"目录","link":"#目录","children":[]},{"level":2,"title":"实现效果记录","slug":"实现效果记录","link":"#实现效果记录","children":[]},{"level":2,"title":"服务端可复用代码","slug":"服务端可复用代码","link":"#服务端可复用代码","children":[]},{"level":2,"title":"客户端部分代码实现","slug":"客户端部分代码实现","link":"#客户端部分代码实现","children":[]},{"level":2,"title":"画板的实现","slug":"画板的实现","link":"#画板的实现","children":[]}],"git":{"createdTime":1700226391000,"updatedTime":1710750676000,"contributors":[{"name":"YiguiDing","email":"2449695354@qq.com","commits":1}]},"readingTime":{"minutes":3.31,"words":992},"filePathRelative":"项目/zip归档/不值一提的小游戏/你画我猜小游戏简易版实现/index.md","localizedDate":"2023年1月26日","excerpt":"","autoDesc":true}');export{v as comp,A as data};
