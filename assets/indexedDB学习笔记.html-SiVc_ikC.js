import{_ as s,c as i,o as a,b as n}from"./app-DXcObvjK.js";const l={},h=n(`<h1 id="indexeddb学习笔记" tabindex="-1"><a class="header-anchor" href="#indexeddb学习笔记"><span>indexedDB学习笔记</span></a></h1><p><strong>特点</strong></p><ul><li><strong>存储容量大</strong><ul><li>IndexedDB主要用来客户端存储大量数据而生的，</li><li>cookie、localstorage等存储方式都有存储大小限制。</li></ul></li><li><strong>非关系型数据库(NoSql)</strong>，以键值对的形式存储数据</li><li><strong>只能通过主键、索引、游标方式查询数据</strong></li><li><strong>持久化存储</strong>，清除浏览器缓存不会清除其数据 <ul><li>cookie、localStorage、sessionStorage会清除数据</li></ul></li><li><strong>异步操作</strong>，IndexedDB操作时不会锁死浏览器，而localstorage是同步的</li><li><strong>支持事务transaction</strong>，一系列的操作步骤中，若有一步失败，整个操作都会取消</li><li><strong>同源策略</strong>，网页只能访问自身域名下的数据库</li></ul><p><strong>重要概念</strong></p><ul><li><strong>事务 transaction</strong><ul><li>对数据库进行一系列操作时，若有一步失败，则会回滚到最初始的状态，确保数据的一致性</li></ul></li><li><strong>仓库 objectStore</strong> ，可以把仓库理解为表</li><li><strong>索引 index</strong><ul><li>可在创建store时创建索引</li><li>查询时可通过索引来筛选</li><li>插入数据时，索引字段不能为空</li></ul></li><li><strong>游标 cursor</strong><ul><li>游标是IndexedDB数据库新的概念</li><li>概念类似c的指针，</li><li>作用类似Python的生成器</li></ul></li></ul><h2 id="打开数据库" tabindex="-1"><a class="header-anchor" href="#打开数据库"><span>打开数据库</span></a></h2><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * 打开数据库</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {object}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> dbName</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 数据库的名字</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> storeName</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 仓库名称</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> version</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 所创建的数据库的版本号</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {object}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 该函数会返回一个数据库实例</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> openDB</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">dbName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">version</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//返回promise对象使得可以链式调用</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    //  兼容浏览器</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> indexedDB</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      window</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">indexedDB</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ||</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      window</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">mozIndexedDB</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ||</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      window</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">webkitIndexedDB</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ||</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      window</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">msIndexedDB</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//用于存储数据库实例</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // 打开数据库，若没有则会创建</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;"> request</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> indexedDB</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">dbName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // 数据库打开成功的回调（连接成功或创建成功）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onsuccess</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      db</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// db数据库对象实例,包含了很多增删查改的操作</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;数据库打开成功&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">      resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//返回给外部调用者</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    };</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // 数据库打开失败的回调（连接或创建失败）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onerror</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;数据库打开报错&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    };</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // 数据库创建或版本号有更新时候的回调，数据内容的更新不会触发该回调</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onupgradeneeded</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">      // 数据库创建或升级的时候会触发</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;onupgradeneeded&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      db</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 获取数据库对象</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">      // 创建存储库</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">      var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> objectStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      objectStore</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">createObjectStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//概念对应于sql数据库的表的名称</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">        keyPath:</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &quot;userID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 指定userID为主键</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">        // autoIncrement: true // 实现自增</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">      // 通过主键仅能查询一条数据，通过索引能查询多条满足指定条件的数据，如查询userSex:男</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">      // 创建索引，在后面查询数据的时候可以根据索引查，若不创建，则只能根据主键来查询</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      objectStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">createIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;userID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;userID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, { </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">unique:</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> }); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 主键应当唯一，unique</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      objectStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">createIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;userName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;userName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, { </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">unique:</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> }); </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      objectStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">createIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;userSex&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;userSex&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, { </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">unique:</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      objectStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">createIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;userAge&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;userAge&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, { </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">unique:</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>使用</strong></p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">/* </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    由于openDB返回的是promise对象,是异步的，所以这么写是错误的：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">        let db = openDB(&quot;test&quot;,1);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">        console.log(db)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">*/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 正确写法应该使用链式方法调用</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">openDB</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">{ </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//链式方法调用，并接收值</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    db</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">db</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // 后续代码必须写在这个里面，但是也可以使用wait方法将该异步操作变同步操作</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    // 后续代码.....</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//报错，因为上述的函数返回的是promise对象，是异步的，</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="新增数据" tabindex="-1"><a class="header-anchor" href="#新增数据"><span>新增数据</span></a></h2><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * 新增数据</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {object}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 数据库实例</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> storeName</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 仓库名称</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> data</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 数据 必须是一个对象，必须包含主键、索引</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> addData</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> request</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    //这里写成了链式调用的形式，也可以不这样写</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    //插入数据需要通过事务transaction来操作，</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    //事务的第一个参数是一个列表</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">transaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">([</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">], </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;readwrite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 参数分别是：事务对象（指定表格名称） 和  操作模式（&quot;只读&quot;或&quot;读写&quot;）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">objectStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 仓库对象</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onsuccess</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;数据写入成功&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onerror</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;数据写入失败&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>使用</strong></p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">    &quot;主键名&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;主键值&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">， </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//可以使用UUID作为主键值，主键必须存在</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">    &quot;索引名1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;索引1值&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">    &quot;索引名2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;索引2值&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">    &quot;索引名3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;索引3值&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">    &quot;其他键名&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;其他键值&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> // 可以第一次插入的data有3个键值对，第二次插入的数据有4个键值对，可以不一致</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">addData</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;storeName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="通过主键读取数据" tabindex="-1"><a class="header-anchor" href="#通过主键读取数据"><span>通过主键读取数据</span></a></h2><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * 通过主键读取数据</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {object}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 数据库实例</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> storeName</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 仓库名称</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> key</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 主键值</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> getDataByKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#4EC9B0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> transaction</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">transaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">([</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">]); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 创建事务</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> objectStore</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> transaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">objectStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 仓库对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> request</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> objectStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 通过主键获取数据</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onerror</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;事务失败&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onsuccess</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;主键查询结果: &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">      resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>使用</strong></p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">getDataByKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;storeName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;主键值&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="通过游标读取数据" tabindex="-1"><a class="header-anchor" href="#通过游标读取数据"><span>通过游标读取数据</span></a></h2><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * 通过游标读取数据</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {object}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 数据库实例</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> storeName</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 仓库名称</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> cursorGetData</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> list</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> [];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> store</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">transaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;readwrite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 事务</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">objectStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 仓库对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> request</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> store</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">openCursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 指针对象，初始化一个游标</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">  // 游标开启成功，逐行读数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onsuccess</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> cursor</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">cursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 必须要检查 因为需要判断是否为游标已经走到了末尾</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">        // 放入列表；</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">            // 可以在此通过条件判断来筛选出想要的数据,但这里效率会非常低，因为会遍历所有表项，要想筛选，应该先通过索引来筛选</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">            //这里没有进行判断，所以获取到的是整张表，但若要想获取整张表 可以用db.transaction().objectStore().getAll()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">        list</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">cursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">); </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">        cursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">continue</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 遍历了存储对象中的所有内容</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;游标读取的数据：&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//获取到值，</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">      // 这里没有用promise，但是indexedDB本身就是异步的，且这是一个事件处理函数，推测仍然不能使用return，具体如何获取返回值应该可以参考之前的代码</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>使用</strong></p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 因为内部没有写判断条件，所以获取的是整张表的数据</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">cursorGetData</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;storeName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;主键值&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 异步函数</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="通过索引读取数据" tabindex="-1"><a class="header-anchor" href="#通过索引读取数据"><span>通过索引读取数据</span></a></h2><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * 通过索引读取数据</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {object}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 数据库实例</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> storeName</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 仓库名称</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> indexName</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 索引名称</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> indexValue</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 索引值</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> getDataByIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">indexName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">indexValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> store</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">transaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;readwrite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">objectStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> request</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> store</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">indexName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">indexValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onerror</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;事务失败&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onsuccess</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;索引查询结果：&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>使用</strong></p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 获取的是第一条满足条件的数据</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">getDataByIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;storeName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;索引键名&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;索引键值&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 异步函数</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="通过索引和游标查询记录" tabindex="-1"><a class="header-anchor" href="#通过索引和游标查询记录"><span>通过索引和游标查询记录</span></a></h2><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * 通过索引和游标查询记录</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {object}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 数据库实例</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> storeName</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 仓库名称</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> indexName</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 索引名称</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> indexValue</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 索引值</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> cursorGetDataByIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">indexName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">indexValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> list</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> [];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> store</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">transaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;readwrite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">objectStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 仓库对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> request</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> store</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">indexName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 索引对象</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">openCursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">( </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">        IDBKeyRange</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">only</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">indexValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//表示查询所有值等于(only) indexValue的游标</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">        ); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//此时拿到的游标就是索引为指定值的表项了</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onsuccess</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> cursor</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">cursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 必须要检查</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      list</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">cursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      cursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">continue</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 遍历了存储对象中的所有内容</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;游标索引查询结果：&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onerror</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>使用</strong></p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 获取的是所有满足条件的数据</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">getDataByIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;storeName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;索引键名&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;索引键值&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 异步函数</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 获取所有age=5的表项</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">getDataByIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;storeName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;age&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 异步函数</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="通过索引和游标分页查询记录" tabindex="-1"><a class="header-anchor" href="#通过索引和游标分页查询记录"><span>通过索引和游标分页查询记录</span></a></h2><p>如果一个数据库有十万条数据，浏览器的页面不可能全部渲染出来，需要做成分页的形式，点击第几页再渲染第几页的内容</p><ul><li>advance 该函数可以让我们的游标跳过多少条开始查询。</li></ul><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * 通过索引和游标分页查询记录</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {object}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 数据库实例</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> storeName</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 仓库名称</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> indexName</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 索引名称</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> indexValue</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 索引值</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {number}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> page</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 页码</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {number}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> pageSize</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 查询条数</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> cursorGetDataByIndexAndPage</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  indexName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  indexValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  page</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//查询的是第几页的内容，从1开始</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">  pageSize</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> list</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> [];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> counter</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 计数器</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> advanced</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 是否跳过多少条查询</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> store</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">transaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;readwrite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">objectStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 仓库对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> request</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> store</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">indexName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 索引对象</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">openCursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">IDBKeyRange</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">only</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">indexValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 指针对象</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onsuccess</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> cursor</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">page</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> advanced</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//判断是否需要跳过多少条开始查询，其实判断page&gt;=1也可以</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      advanced</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      cursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">advance</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">((</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">page</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> pageSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 跳过多少条</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">cursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">      // 必须要检查</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      list</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">cursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      counter</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">counter</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> pageSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">        cursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">continue</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 遍历了存储对象中的所有内容</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">        cursor</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">        console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;分页查询结果&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;分页查询结果&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onerror</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>使用</strong></p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 获取的是所有满足条件的数据的指定页码的指定条数</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">cursorGetDataByIndexAndPage</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;storeName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;索引键名&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;索引键值&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">页码</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">，</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">条数</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 获取的是age=5的第二页中的数据，每页有10条数据</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">getDataByIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;storeName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;age&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="更新数据" tabindex="-1"><a class="header-anchor" href="#更新数据"><span>更新数据</span></a></h2><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * 更新数据</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {object}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 数据库实例</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> storeName</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 仓库名称</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {object}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> data</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 数据</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> updateDB</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> request</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">transaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">([</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">], </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;readwrite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 事务对象</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">objectStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 仓库对象</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//若有该数据则更新该数据，若没有则添加该数据</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onsuccess</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;数据更新成功&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onerror</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;数据更新失败&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="通过主键删除数据" tabindex="-1"><a class="header-anchor" href="#通过主键删除数据"><span>通过主键删除数据</span></a></h2><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * 通过主键删除数据</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {object}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 数据库实例</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> storeName</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 仓库名称</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {object}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> id</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 主键值</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> deleteDB</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> request</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">transaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">([</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">], </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;readwrite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">objectStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onsuccess</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;数据删除成功&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onerror</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;数据删除失败&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="通过索引和游标删除指定的数据" tabindex="-1"><a class="header-anchor" href="#通过索引和游标删除指定的数据"><span>通过索引和游标删除指定的数据</span></a></h2><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * 通过索引和游标删除指定的数据</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {object}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 数据库实例</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> storeName</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 仓库名称</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> indexName</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 索引名</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {object}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> indexValue</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 索引值</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> cursorDelete</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">indexName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">indexValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> store</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">transaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;readwrite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">objectStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">storeName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> request</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> store</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">indexName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 索引对象</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">openCursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">IDBKeyRange</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">only</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">indexValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 指针对象</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onsuccess</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> cursor</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> deleteRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">cursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      deleteRequest</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> cursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">// 请求删除当前项</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      deleteRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onerror</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">        console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;游标删除该记录失败&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      deleteRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onsuccess</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">        console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;游标删除该记录成功&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">      };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">      cursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">continue</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">//游标移动到下一个，以便删除所有匹配数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  request</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onerror</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="关闭数据库" tabindex="-1"><a class="header-anchor" href="#关闭数据库"><span>关闭数据库</span></a></h2><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * 关闭数据库</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {object}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> db</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 数据库实例</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> closeDB</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  db</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;数据库已关闭&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="删除数据库" tabindex="-1"><a class="header-anchor" href="#删除数据库"><span>删除数据库</span></a></h2><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#E6E6E6;--shiki-light-bg:#fff;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-light slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * 删除数据库</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#4EC9B0;"> {object}</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> dbName</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> 数据库名称</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> deleteDBAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">dbName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">dbName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> deleteRequest</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> window</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">indexedDB</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">deleteDatabase</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">dbName</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  deleteRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onerror</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;删除失败&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">  deleteRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">onsuccess</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;删除成功&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,45),k=[h];function t(e,p){return a(),i("div",null,k)}const d=s(l,[["render",t],["__file","indexedDB学习笔记.html.vue"]]),r=JSON.parse('{"path":"/%E5%89%8D%E7%AB%AF/indexedDB%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/indexedDB%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html","title":"indexedDB学习笔记","lang":"zh-CN","frontmatter":{"title":"indexedDB学习笔记","date":"2022-07-17T06:49:00.000Z","cover":"./cover/default_cover.jpg","tag":["indexedDB"],"category":"笔记","description":"indexedDB学习笔记 特点 存储容量大 IndexedDB主要用来客户端存储大量数据而生的， cookie、localstorage等存储方式都有存储大小限制。 非关系型数据库(NoSql)，以键值对的形式存储数据 只能通过主键、索引、游标方式查询数据 持久化存储，清除浏览器缓存不会清除其数据 cookie、localStorage、sessio...","head":[["meta",{"property":"og:url","content":"https://dingdingdang.online/%E5%89%8D%E7%AB%AF/indexedDB%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/indexedDB%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html"}],["meta",{"property":"og:site_name","content":"YiguiDing的Blog小站"}],["meta",{"property":"og:title","content":"indexedDB学习笔记"}],["meta",{"property":"og:description","content":"indexedDB学习笔记 特点 存储容量大 IndexedDB主要用来客户端存储大量数据而生的， cookie、localstorage等存储方式都有存储大小限制。 非关系型数据库(NoSql)，以键值对的形式存储数据 只能通过主键、索引、游标方式查询数据 持久化存储，清除浏览器缓存不会清除其数据 cookie、localStorage、sessio..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-11-17T13:06:31.000Z"}],["meta",{"property":"article:author","content":"丁毅桂"}],["meta",{"property":"article:tag","content":"indexedDB"}],["meta",{"property":"article:published_time","content":"2022-07-17T06:49:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-11-17T13:06:31.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"indexedDB学习笔记\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-07-17T06:49:00.000Z\\",\\"dateModified\\":\\"2023-11-17T13:06:31.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"丁毅桂\\",\\"email\\":\\"2449695354@qq.com\\"}]}"],["meta",{"name":"baidu-site-verification","content":"codeva-PwE9Ts6nMl"}]]},"headers":[{"level":2,"title":"打开数据库","slug":"打开数据库","link":"#打开数据库","children":[]},{"level":2,"title":"新增数据","slug":"新增数据","link":"#新增数据","children":[]},{"level":2,"title":"通过主键读取数据","slug":"通过主键读取数据","link":"#通过主键读取数据","children":[]},{"level":2,"title":"通过游标读取数据","slug":"通过游标读取数据","link":"#通过游标读取数据","children":[]},{"level":2,"title":"通过索引读取数据","slug":"通过索引读取数据","link":"#通过索引读取数据","children":[]},{"level":2,"title":"通过索引和游标查询记录","slug":"通过索引和游标查询记录","link":"#通过索引和游标查询记录","children":[]},{"level":2,"title":"通过索引和游标分页查询记录","slug":"通过索引和游标分页查询记录","link":"#通过索引和游标分页查询记录","children":[]},{"level":2,"title":"更新数据","slug":"更新数据","link":"#更新数据","children":[]},{"level":2,"title":"通过主键删除数据","slug":"通过主键删除数据","link":"#通过主键删除数据","children":[]},{"level":2,"title":"通过索引和游标删除指定的数据","slug":"通过索引和游标删除指定的数据","link":"#通过索引和游标删除指定的数据","children":[]},{"level":2,"title":"关闭数据库","slug":"关闭数据库","link":"#关闭数据库","children":[]},{"level":2,"title":"删除数据库","slug":"删除数据库","link":"#删除数据库","children":[]}],"git":{"createdTime":1700226391000,"updatedTime":1700226391000,"contributors":[{"name":"YiguiDing","email":"2449695354@qq.com","commits":1}]},"readingTime":{"minutes":9.07,"words":2722},"filePathRelative":"前端/indexedDB学习笔记/indexedDB学习笔记.md","localizedDate":"2022年7月17日","excerpt":"","autoDesc":true}');export{d as comp,r as data};
