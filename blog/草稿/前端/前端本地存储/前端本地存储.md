---
title: 前端本地存储
date: 2022-07-07T06:03:00+08:00
# top: 10
cover: ./cover/default_cover.jpg
# coverWidth: 1920
# coverHeight: 1080
tag: [笔记,前端本地存储]
# ---article: false---
category: 笔记
---


# 前端本地存储

## 特性

- 数据存储在用户浏览器中
- 设置、读取方便，关闭浏览器不丢失数据
- 容量大，
  - `window.sessionStorage` 越5M
  - `window.localStorage` 越20M
- 只能存储字符串，可将对象通过json编码后存储`JSON.stringify(obj)`

## window.sessionStorage

- 生命周期为关闭浏览器窗口
- 在单个窗口的多页面中，数据可共享
- 以键值对的形式存储使用

**存储数据**

```js
sessionStorage.setItem(key,value)
```

**获取数据**

```js
sessionStorage.getItem(key)
```

**移除数据**

```js
sessionStorage.removeItem(key)
```

**清除所有数据**

```js
sessionStorage.clear()
```

## window.localStorage

- 生命周期永久，除非手动删除
- 可多窗口共享数据
- 以键值对存储

**存储数据**

```js
localStorage.setItem(key,value)
```

**获取数据**

```js
localStorage.getItem(key)
```

**移除数据**

```js
localStorage.removeItem(key)
```

**清除所有数据**

```js
localStorage.clear()
```

## 记住用户名案例

<div id="demoiwfow">
    <input id="username" type="text"><input type="checkbox" name="" id="rember" ><span>记住用户名，下次自动填写</span>
</div>
<style>
    #demoiwfow *{
        display: inline-block;
        padding: 0;
        margin: 0;
        height: 25px;
        line-height: 25px;
        vertical-align: middle;
    }
</style>
<script>
    var username = document.querySelector("#username")
    var rember = document.querySelector("#rember")
    username.value = localStorage.getItem('username')
    username.addEventListener("keyup",function(){
        if(rember.checked)
        {
            localStorage.setItem("username",username.value)
        }else{
            localStorage.removeItem("username")
        }
    })
    rember.addEventListener("change",function(){
        if(rember.checked)
        {
            localStorage.setItem("username",username.value)
        }else{
            localStorage.removeItem("username")
        }
    })
</script>

```html
<div id="demoiwfow">
    <input id="username" type="text"><input type="checkbox" name="" id="rember" ><span>记住用户名，下次自动填写</span>
</div>
<style>
    #demoiwfow *{
        display: inline-block;
        padding: 0;
        margin: 0;
        height: 25px;
        line-height: 25px;
        vertical-align: middle;
    }
</style>
<script>
    var username = document.querySelector("#username")
    var rember = document.querySelector("#rember")
    username.value = localStorage.getItem('username')
    username.addEventListener("keyup",function(){
        if(rember.checked)
        {
            localStorage.setItem("username",username.value)
        }else{
            localStorage.removeItem("username")
        }
    })
    rember.addEventListener("change",function(){
        if(rember.checked)
        {
            localStorage.setItem("username",username.value)
        }else{
            localStorage.removeItem("username")
        }
    })
</script>
```

## JSON

- 本地存储只能存储字符串类型的数据
- 要存储js对象类型的数据，需利用`JSON.stringify()`来做转换
- 获取本地存储的js对象时，由于存储的是字符串，所以须用`JSON.parse()`来做转换

```js
var listObj = [{
    title:"???",
    data:"20220714"
    content:"???????????"
}]
//存储数据
localStorage.setItem("文章列表",JSON.stringify(listObj))
//获取数据
var temp = localStorage.getItem("文章列表")
```
