{"shortInfo":{"layout":"post","title":"nexmoe主题文章底部UTF-8链接转中文","date":"2022-02-23T13:46:00.000Z","cover":"\\self_server\\assets\\images\\nexmoe主题文章底部UTF-8链接转中文.png","tags":["笔记","nexmoe"],"hideAtIndex":true,"categories":"前端","id":927140103,"countWords":191,"readSeconds":19.1,"assetsbaseUrl":"/self_server/assets/"},"content":"## 原代码\r\n```\r\n<% if (page.hide_copyright !== true && theme.copyright || page.copyright) { %>\r\n    <div class=\"nexmoe-post-copyright\">\r\n        <strong><%- __('copyright.author') %>：</strong><%= config.author %><br>\r\n        <strong><%- __('copyright.permalink') %>：</strong>\r\n        <%- link_to(page.permalink, page.permalink, {external: true}) %><br>\r\n        <% if (page.copyright) { %>\r\n            <%- page.copyright %>\r\n        <% } else { %>\r\n            <%- theme.copyright %>\r\n        <% } %>\r\n    </div>\r\n<% } %>\r\n```\r\n\r\n## 修改后\r\n```\r\n<% if (page.hide_copyright !== true && theme.copyright || page.copyright) { %>\r\n    \r\n    <script type=\"text/javascript\">\r\n        var decodePageURI = decodeURI(\"<%- page.permalink %>\")\r\n        timer = null\r\n        timer=setInterval(function(){\r\n            do\r\n            {\r\n                document.getElementById(\"page_address\").href=decodePageURI\r\n                document.getElementById(\"page_address\").title=decodePageURI\r\n                document.getElementById(\"page_address\").innerHTML=decodePageURI\r\n            }while(document.getElementById(\"page_address\").innerHTML!=decodePageURI)\r\n            clearInterval(timer)\r\n        },\r\n        100\r\n        )\r\n    </script>\r\n\r\n    <div class=\"nexmoe-post-copyright\">\r\n        <strong><%- __('copyright.author') %>：</strong><%= config.author %><br>\r\n        <strong><%- __('copyright.permalink') %>：</strong>\r\n        <!-- <%- link_to(page.permalink, page.permalink, {external: true}) %><br> -->\r\n        <a id=\"page_address\" href=\"\" title=\"\" target=\"_blank\" rel=\"noopener\"></a><br>\r\n        <% if (page.copyright) { %>\r\n            <%- page.copyright %>\r\n        <% } else { %>\r\n            <%- theme.copyright %>\r\n        <% } %>\r\n    </div>\r\n<% } %>\r\n```\r\n## 效果\r\n修改后效果为能根据page.permalink内容展示UTF-8解码后的中文URL\r\n{% gallery %}\r\n![修改前](../images/修改前.png)\r\n![修改后](../images/修改后.png)\r\n{% endgallery %}\r\n<br>\r\n<br>\r\n<br>\r\n<br>\r\n\r\n"}