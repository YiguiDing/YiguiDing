{"shortInfo":{"title":"frp配置过程记录(ipad远程登录电脑)","date":"2022-08-04T12:26:00.000Z","cover":"/self_server/assets/images/default_cover2.jpg","tags":["frp","linux","ipad"],"hideAtIndex":true,"categories":"笔记","id":11,"countWords":608,"readSeconds":60.8,"assetsbaseUrl":"/self_server/assets/"},"content":"# frp配置过程记录(ipad远程登录电脑)\r\n\r\n\r\n## 服务端配置过程\r\n\r\n**准备工作**\r\n```bash\r\n# 从github下载frp的releases版本\r\nwget -O https://github.com/fatedier/frp/releases/download/v0.44.0/frp_0.44.0_linux_amd64.tar.gz\r\n# 解压\r\ntar -xvf ./frp_0.44.0_linux_amd64.tar.gz\r\n# 进入目录\r\ncd ./frp_0.44.0_linux_amd64\r\n# 创建文件夹\r\nmkdir ~/frps/\r\n# 移动\r\nmv ./frps ~/frps/\r\n# 添加执行权限\r\nchmod +x ~/frps/frps\r\n```\r\n\r\n\r\n**编写配置文件**\r\n```bash\r\ncat > ~/frps/frps.ini  << EOF\r\n# frps.ini\r\n[common]\r\n# 这里是基本配置部分\r\nbind_port = 7000\r\nbind_udp_port = 7000\r\n\r\n# 这里设置鉴权方式为:token\r\nauthentication_method = token\r\n# 随便写一段英文+数字 服务端和客户端需一致\r\ntoken = swhm3elmbxnbnuqvoh5i5wlitjyymv22\r\nEOF\r\n```\r\n\r\n**临时启动服务测试是否配置成功**\r\n```bash\r\n~/frps/frps -c ~/frps/frps.ini\r\n```\r\n\r\n\r\n**配置开机自启:创建并编辑 frps.service 文件**\r\n\r\n```bash\r\n# su用于提权 否则无法使用cat\r\nsu\r\ncat > /etc/systemd/system/frps.service  << EOF\r\n# for redhat8\r\n[Unit]\r\n# 服务名称，可自定义\r\nDescription = frp server\r\nAfter = network.target syslog.target\r\nWants = network.target\r\n\r\n[Service]\r\nType = simple\r\n# 启动frps的命令，需修改为您的frps的安装路径\r\n# /home/userName/ 为路径\r\nExecStart = /home/dyg/frps/frps -c /home/dyg/frps/frps.ini\r\n\r\n[Install]\r\nWantedBy = multi-user.target\r\nEOF\r\n```\r\n\r\n**配置开机自启:使用 systemd 命令，管理 frps**\r\n```bash\r\n# 启动frp\r\nsystemctl start frps\r\n# 停止frp\r\nsystemctl stop frps\r\n# 重启frp\r\nsystemctl restart frps\r\n# 查看frp状态\r\nsystemctl status frps\r\n# 配置 frps 开机自启\r\nsystemctl enable frps\r\n# 取消配置 frps 开机自启\r\nsystemctl disable frps\r\n```\r\n\r\n\r\n\r\n## 客户端配置（win10电脑）\r\n**frpc.ini文件**\r\n```txt\r\n[common]\r\nprotocol = tcp\r\n# xx.xx.xx.xx 为服务端ip地址或域名\r\nserver_addr = xx.xx.xx.xx\r\nserver_port = 7000\r\nauthentication_method = token\r\n# 随便写一段英文+数字 服务端和客户端需一致\r\ntoken = swhm3elmbxnbnuqvoh5i5wlitjyymv22\r\n\r\n# win10远程桌面TCP配置\r\n[mstsc_TCP]\r\ntype = tcp\r\nlocal_ip = 127.0.0.1\r\nlocal_port = 3389\r\nremote_port = 11111\r\n\r\n# win10远程桌面UDP配置\r\n[mstsc_UDP]\r\ntype = udp\r\nlocal_ip = 127.0.0.1\r\nlocal_port = 3389\r\nremote_port = 11111\r\n```\r\n\r\n**启动服务**\r\n将frpc.exe和frpc.ini放置到相同目录,然后执行\r\n```bash\r\n./frpc.exe\r\n```\r\n\r\n\r\n\r\n## 客户端配置2（ubuntu20.04）\r\n适用于ubuntu centos\r\n```bash\r\n# 切换目录\r\ncd frp_0.44.0_linux_amd64/\r\n# frpc拷贝到/usr/local/bin/\r\nsudo cp frpc /usr/local/bin/frpc\r\n# frpc.ini拷贝到/etc/frp/\r\nsudo mkdir /etc/frp/\r\nsudo cp frpc.ini /etc/frp/\r\n# 编辑配置为系统服务\r\nvim /usr/lib/systemd/system/frpc.service\r\n#########################################\r\n[Unit]\r\nDescription=frpc\r\nAfter=network.target\r\n[Service]\r\nTimeoutStartSec=1\r\nExecStart=/usr/local/bin/frpc -c /etc/frp/frpc.ini\r\nExecStop=/bin/kill $MAINPID\r\n[Install]\r\nWantedBy=multi-user.target\r\n###########################################\r\n\r\n# 启动 frp 并设置开机启动\r\nsystemctl enable frpc\r\nsystemctl start frpc\r\nsystemctl status frpc\r\n \r\n# 部分服务器上,可以需要加 .service 后缀来操作,即:\r\nsystemctl enable frpc.service\r\nsystemctl start frpc.service\r\nsystemctl status frpc.service\r\n```"}