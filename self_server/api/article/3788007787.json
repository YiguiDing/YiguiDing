{"shortInfo":{"title":"前端本地存储","date":"2022-07-06T22:03:00.000Z","cover":"\\self_server\\assets\\images\\default_cover2.jpg","tags":["笔记","前端本地存储"],"hideAtIndex":true,"categories":"笔记","id":3788007787,"countWords":501,"readSeconds":50.1,"assetsbaseUrl":"/self_server/assets/"},"content":"# 前端本地存储\r\n\r\n## 特性\r\n* 数据存储在用户浏览器中\r\n* 设置、读取方便，关闭浏览器不丢失数据\r\n* 容量大，\r\n    * `window.sessionStorage` 越5M\r\n    * `window.localStorage` 越20M\r\n* 只能存储字符串，可将对象通过json编码后存储`JSON.stringify(obj)`\r\n\r\n## window.sessionStorage\r\n* 生命周期为关闭浏览器窗口\r\n* 在单个窗口的多页面中，数据可共享\r\n* 以键值对的形式存储使用\r\n\r\n**存储数据**\r\n```js\r\nsessionStorage.setItem(key,value)\r\n```\r\n\r\n**获取数据**\r\n```js\r\nsessionStorage.getItem(key)\r\n```\r\n\r\n**移除数据**\r\n```js\r\nsessionStorage.removeItem(key)\r\n```\r\n\r\n**清除所有数据**\r\n```js\r\nsessionStorage.clear()\r\n```\r\n\r\n## window.localStorage\r\n* 生命周期永久，除非手动删除\r\n* 可多窗口共享数据\r\n* 以键值对存储\r\n\r\n**存储数据**\r\n```js\r\nlocalStorage.setItem(key,value)\r\n```\r\n\r\n**获取数据**\r\n```js\r\nlocalStorage.getItem(key)\r\n```\r\n\r\n**移除数据**\r\n```js\r\nlocalStorage.removeItem(key)\r\n```\r\n\r\n**清除所有数据**\r\n```js\r\nlocalStorage.clear()\r\n```\r\n\r\n## 记住用户名案例\r\n\r\n<div id=\"demoiwfow\">\r\n    <input id=\"username\" type=\"text\"><input type=\"checkbox\" name=\"\" id=\"rember\" ><span>记住用户名，下次自动填写</span>\r\n</div>\r\n<style>\r\n    #demoiwfow *{\r\n        display: inline-block;\r\n        padding: 0;\r\n        margin: 0;\r\n        height: 25px;\r\n        line-height: 25px;\r\n        vertical-align: middle;\r\n    }\r\n</style>\r\n<script>\r\n    var username = document.querySelector(\"#username\")\r\n    var rember = document.querySelector(\"#rember\")\r\n    username.value = localStorage.getItem('username')\r\n    username.addEventListener(\"keyup\",function(){\r\n        if(rember.checked)\r\n        {\r\n            localStorage.setItem(\"username\",username.value)\r\n        }else{\r\n            localStorage.removeItem(\"username\")\r\n        }\r\n    })\r\n    rember.addEventListener(\"change\",function(){\r\n        if(rember.checked)\r\n        {\r\n            localStorage.setItem(\"username\",username.value)\r\n        }else{\r\n            localStorage.removeItem(\"username\")\r\n        }\r\n    })\r\n</script>\r\n\r\n```html\r\n<div id=\"demoiwfow\">\r\n    <input id=\"username\" type=\"text\"><input type=\"checkbox\" name=\"\" id=\"rember\" ><span>记住用户名，下次自动填写</span>\r\n</div>\r\n<style>\r\n    #demoiwfow *{\r\n        display: inline-block;\r\n        padding: 0;\r\n        margin: 0;\r\n        height: 25px;\r\n        line-height: 25px;\r\n        vertical-align: middle;\r\n    }\r\n</style>\r\n<script>\r\n    var username = document.querySelector(\"#username\")\r\n    var rember = document.querySelector(\"#rember\")\r\n    username.value = localStorage.getItem('username')\r\n    username.addEventListener(\"keyup\",function(){\r\n        if(rember.checked)\r\n        {\r\n            localStorage.setItem(\"username\",username.value)\r\n        }else{\r\n            localStorage.removeItem(\"username\")\r\n        }\r\n    })\r\n    rember.addEventListener(\"change\",function(){\r\n        if(rember.checked)\r\n        {\r\n            localStorage.setItem(\"username\",username.value)\r\n        }else{\r\n            localStorage.removeItem(\"username\")\r\n        }\r\n    })\r\n</script>\r\n```\r\n\r\n\r\n## JSON\r\n\r\n* 本地存储只能存储字符串类型的数据\r\n* 要存储js对象类型的数据，需利用`JSON.stringify()`来做转换\r\n* 获取本地存储的js对象时，由于存储的是字符串，所以须用`JSON.parse()`来做转换\r\n\r\n```js\r\nvar listObj = [{\r\n    title:\"???\",\r\n    data:\"20220714\"\r\n    content:\"???????????\"\r\n}]\r\n//存储数据\r\nlocalStorage.setItem(\"文章列表\",JSON.stringify(listObj))\r\n//获取数据\r\nvar temp = localStorage.getItem(\"文章列表\")\r\n```"}